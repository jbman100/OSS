<!DOCTYPE html>
<head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, initial-scale=0.75, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <link rel="stylesheet" type="text/css" href="http://skutnik.iiens.net/github_like.css">
    <link rel="stylesheet" type="text/css" href="http://skutnik.iiens.net/colors.css">
    <link rel="shortcut icon" href="http://skutnik.iiens.net/icon.png" type="image/x-icon">
    <title>spoutnik.com</title>
</head>
<p><a href="http://skutnik.iiens.net/cours/OSS">Retour au sommaire</a></p>
<h2><code>open</code></h2>
<pre lang=c><code><span class="highlight"><span class="kt">int</span> <span class="n">open</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
</span></code></pre>
<h5>Fonction</h5>
<ul>
<li>Ouvre un flux vers le fichier passé en argument.</li>
</ul>
<h5>Arguments</h5>
<ul>
<li><code>const char *pathname</code>: Le nom du fichier;</li>
<li><code>int flags</code>: un entier spécial défini dans un <code>enum</code>, pouvant être:
<ul>
<li><code>O_RDONLY</code>: lecture seule;</li>
<li><code>O_WRONLY</code>: écriture seule;</li>
<li><code>O_RDWR</code>: lecture et écriture;</li>
<li><code>O_TRUNC</code>: effacement avant écriture;</li>
<li><code>O_CREAT</code>: création si non-existent;</li>
<li><code>O_APPEND</code>: écriture en fin de fichier.</li>
</ul>
</li>
</ul>
<h4>Retour</h4>
<ul>
<li>Un entier <code>fd</code> correspondant au flux créé, <code>-1</code> sinon.</li>
</ul>
<h2><code>close</code></h2>
<pre lang=c><code><span class="highlight"><span class="kt">int</span> <span class="n">close</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">);</span>
</span></code></pre>
<h5>Fonction</h5>
<ul>
<li>Ferme un flux passé en argument.</li>
</ul>
<h5>Arguments</h5>
<ul>
<li><code>int fd</code>: l'entier correspondant au flux.</li>
</ul>
<h5>Retour</h5>
<ul>
<li>Un entier correspondant au statut, <code>-1</code> si une erreur s'est produite.</li>
</ul>
<h2><code>write</code></h2>
<pre lang=c><code><span class="highlight"><span class="kt">ssize_t</span> <span class="n">write</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">);</span>
</span></code></pre>
<h5>Fonction</h5>
<ul>
<li>Écrit dans un flux passé en argument.</li>
</ul>
<h5>Arguments</h5>
<ul>
<li><code>int fd</code>: l'entier correspondant au flux;</li>
<li><code>const void *buf</code>: un pointeur vers la mémoire à écrire dans le fichier;</li>
<li><code>size_t count</code>: la taille de la mémoire à écrire.</li>
</ul>
<h5>Retour</h5>
<ul>
<li>Un entier correspondant au nombre de bytes écrits, <code>-1</code> si une erreur s'est produite.</li>
</ul>
<h2><code>read</code></h2>
<pre lang=c><code><span class="highlight"><span class="kt">ssize_t</span> <span class="n">read</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">);</span>
</span></code></pre>
<h5>Fonction</h5>
<ul>
<li>Lit dans le flux correpondant à <code>fd</code> <code>count</code> bytes, et les stocke dans <code>buf</code>.</li>
</ul>
<h5>Arguments</h5>
<ul>
<li><code>int fd</code>: le descripteur de flux;</li>
<li><code>void *buf</code>: un pointeur vers la zone mémoire où stocker les infos lues;</li>
<li><code>size_t count</code>: la taille de la mémoire à lire.</li>
</ul>
<h5>Retour</h5>
<ul>
<li>Un entier correspondant à la taille de la mémoire lue, et <code>-1</code> si une erreur s'est produite.</li>
</ul>
<h2><code>lseek</code></h2>
<pre lang=c><code><span class="highlight"><span class="kt">off_t</span> <span class="n">lseek</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">off_t</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">whence</span><span class="p">);</span>
</span></code></pre>
<h5>Fonction</h5>
<ul>
<li>Repositionne dans le flux correpondant à <code>fd</code> de <code>offset</code> par rapport à <code>whence</code>: si <code>whence</code> est <code>SEEK_END</code> et <code>offset</code> est <code>0</code>, il va à <code>0</code> <code>bytes</code> de la fin.</li>
</ul>
<h5>Arguments</h5>
<ul>
<li><code>int fd</code>: le descripteur de flux;</li>
<li><code>off_t offset</code>: Le décalage depuis <code>whence</code>;</li>
<li><code>int whence</code>: un entier spécial défini dans un <code>enum</code>, pouvant être:
<ul>
<li><code>SEEK_SET</code>: Depuis le début;</li>
<li><code>SEEK_CUR</code>: Depuis la position du curseur;</li>
<li><code>SEEK_END</code>: Depuis la fin.</li>
</ul>
</li>
</ul>
<h5>Retour</h5>
<ul>
<li>Un entier correspondant à la position du curseur dans le fichier, et <code>-1</code> si une erreur s'est produite.</li>
</ul>
<h2><code>dup</code> et <code>dup2</code></h2>
<pre lang=c><code><span class="highlight"><span class="kt">int</span> <span class="n">dup</span><span class="p">(</span><span class="kt">int</span> <span class="n">oldfd</span><span class="p">)</span>
</span></code></pre>
<pre lang=c><code><span class="highlight"><span class="kt">int</span> <span class="n">dup2</span><span class="p">(</span><span class="kt">int</span> <span class="n">oldfd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">newfd</span><span class="p">);</span>
</span></code></pre>
<h5>Fonction</h5>
<ul>
<li>Copie les flux. <code>dup</code> crée un nouveau <code>fd</code> qui pointe vers le même flux que <code>oldfd</code>, alors que <code>dup2</code> ferme <code>newfd</code> et le fait pointer vers le même flux que <code>oldfd</code>.</li>
</ul>
<h5>Arguments</h5>
<ul>
<li><code>int oldfd</code>: le descripteur de flux à copier;</li>
<li><code>int newfd</code>: le flux à écraser et faire pointer vers <code>oldfd</code>.</li>
</ul>
<h5>Retour</h5>
<ul>
<li>Un entier correspondant au <code>fd</code> créé, et <code>-1</code> si une erreur s'est produite.</li>
</ul>
